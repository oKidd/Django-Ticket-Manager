<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tickets ({{ total }})</title>
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/512/two-tickets.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</head>
<body class="row text-center">
    <header>
        <div class="alert alert-info m-3 p-3">
            <h1 class="display-1">Mis Tickets</h1>
        </div>
    </header>
    <main class="text-start">
        <section class="izq col-3 float-start">
            <div class="ms-3 me-3 mb-5 border border-secondary">
                <div class="bg-dark text-white text-center p-2">
                    <h1 class="display-6 fs-2">Filtros:</h1>
                </div>

                
                <div class="form-check m-3 display-6 fs-4 pb-3 border-bottom border-secondary">
                    <a href="filtro/No Atendido" class="form-check-input" type="radio" name="flexRadioDefault" id="ticketsAbiertos" style="background-color: #adb5bd;"></a>
                    <label class="form-check-label" for="ticketsAbiertos">
                        No Atendidos
                    </label>
                    <p class="float-end me-3">{{ na }}</p>
                </div>

                <div class="form-check m-3 display-6 fs-4 pb-3 border-bottom border-secondary">
                    <a href="filtro/Respondido" class="form-check-input" type="radio" name="flexRadioDefault" id="ticketsRespondidos" style="background-color: #0d6efd;"></a>
                    <label class="form-check-label" for="ticketsRespondidos">
                        Respondidos
                    </label>
                    <p class="float-end me-3">{{ re }}</p>
                </div>

                <div class="form-check m-3 display-6 fs-4">
                    <a href="filtro/Cerrado" class="form-check-input" type="radio" name="flexRadioDefault" id="ticketsCerrados" style="background-color: #dc3545;"></a>
                    <label class="form-check-label" for="ticketsCerrados">
                        Cerrados
                    </label>
                    <p class="float-end me-3">{{ ce }}</p>
                </div>

                <div class="d-flex justify-content-center p-3">
                    <a href="/" class="col-12 btn btn-danger">
                        Limpiar Filtros
                    </a>
                </div>
            </div>

            <div class="d-flex justify-content-center mb-4">
                <a href="/crear-ticket" class="col-9 btn btn-success">
                    Crear Ticket
                </a>
            </div>
            <!-- <div class="d-flex justify-content-center">
                <a href="/" class="col-9 btn btn-primary">
                    Volver
                </a>
            </div> -->
            
        </section>
        <div class="der col-9 float-end mb-5">
            <div class="ms-5 me-5 border border-secondary">
                <div class="bg-dark text-white text-center p-2">
                    <h1 class="display-6 fs-2">Tickets</h1>
                </div>

                {% if tickets %}

                    {% for ticket in tickets %}
                    <a href="/ticket/{{ ticket.id }}" class="text-decoration-none text-dark">
                        <div class="p-3 display-6 border-bottom border-secondary">
                            <h1 class="fs-3 float-end me-3">ID: #000{{ ticket.id }}</h1>
                            <h1 class="fs-3">
                                <span class="dot" style="
                                    height: 25px;
                                    width: 25px;
                                    border-radius: 50%;
                                    display: inline-block;
                                    {% if ticket.estado == 'Cerrado' %}
                                        background-color: #dc3545;
                                    {% elif ticket.estado == 'Respondido' %}
                                        background-color: #0d6efd;
                                    {% else %}
                                        background-color: #adb5bd;
                                    {% endif %}">
                                </span>
                                Asunto: {{ ticket.asunto }}</h1>
                            <h1 class="fs-5">Usuario: {{ ticket.emisor }}</h1>
                            <h2 class="fs-5">Estado: {{ ticket.estado }}</h2>
                            <p class="fs-5 overflow-hidden">{{ ticket.descripcion }}</p>
                        </div>
                    </a>
                    {% endfor %}

                {% else %}

                <div class="alert alert-danger text-center">
                    <h1 class="display-1">Error</h1>
                    <h1 class="display-1 fs-3">No tienes tickets...</h1>
                </div>

                {% endif %}

            </div>
        </div>
    </main>
</body>
</html>